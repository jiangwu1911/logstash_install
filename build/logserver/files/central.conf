input {
    syslog {
        port => 5514
        type => syslog
        add_field => [ "catalog", "server" ]
    }
    lumberjack {
        port => 5000
        type => "logs"
        ssl_certificate => "/etc/pki/tls/certs/logstash-forwarder.crt"
        ssl_key => "/etc/pki/tls/private/logstash-forwarder.key"
    }
}

filter {
    if [type] == "nginx-access" {
        grok {
            match => { "message" => "%{NGINXACCESS}" }
        }
    }
}

output {
    elasticsearch {
        cluster => "metalog"
        host => "localhost"
        port => "9300"
        index => "logstash-%{catalog}-%{+YYYY.MM.dd}"
    }
}
